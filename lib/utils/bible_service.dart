import 'dart:math';
import 'translations.dart';
import 'holy_translator.dart';

class BibleService {
  static final List<Map<String, String>> _verses = [
    {'text': '태초에 하나님이 천지를 창조하시니라', 'source': '창세기 1:1'},
    {'text': '여호와는 나의 목자시니 내게 부족함이 없으리로다', 'source': '시편 23:1'},
    {'text': '내게 능력 주시는 자 안에서 내가 모든 것을 할 수 있느니라', 'source': '빌립보서 4:13'},
    {'text': '사랑은 오래 참고 사랑은 온유하며 시기하지 아니하며', 'source': '고린도전서 13:4'},
    {'text': '두려워하지 말라 내가 너와 함께 함이라', 'source': '이사야 41:10'},
    {
    "text": "항상 기뻐하라 쉬지 말고 기도하라 범사에 감사하라.",
    "source": "데살로니가전서 5:16-18"
  },
  {
    "text": "믿음은 바라는 것들의 실상이요 보이지 않는 것들의 증거니.",
    "source": "히브리서 11:1"
  },
  {
    "text": "네 시작은 미약하였으나 네 나중은 심히 창대하리라.",
    "source": "욥기 8:7"
  },
  {
    "text": "사랑은 오래 참고 사랑은 온유하며 시기하지 아니하며 사랑은 자랑하지 아니하며 교만하지 아니하며.",
    "source": "고린도전서 13:4"
  },
  {
    "text": "하나님이 세상을 이처럼 사랑하사 독생자를 주셨으니 이는 그를 믿는 자마다 멸망하지 않고 영생을 얻게 하려 하심이라.",
    "source": "요한복음 3:16"
  },
  {
    "text": "수고하고 무거운 짐 진 자들아 다 내게로 오라 내가 너희를 쉬게 하리라.",
    "source": "마태복음 11:28"
  },
  {
    "text": "구하라 그리하면 너희에게 주실 것이요 찾으라 그리하면 찾아낼 것이요 문을 두드리라 그리하면 너희에게 열릴 것이니.",
    "source": "마태복음 7:7"
  },
  {
    "text": "너희는 세상의 소금이니 소금이 만일 그 맛을 잃으면 무엇으로 짜게 하리요.",
    "source": "마태복음 5:13"
  },
  {
    "text": "너의 행사를 여호와께 맡기라 그리하면 네가 경영하는 것이 이루어지리라.",
    "source": "잠언 16:3"
  },
  {
    "text": "무릇 지킬만한 것보다 더욱 네 마음을 지키라 생명의 근원이 이에서 남이니라.",
    "source": "잠언 4:23"
  },
  {
    "text": "주의 말씀은 내 발에 등이요 내 길에 빛이니이다.",
    "source": "시편 119:105"
  },
  {
    "text": "우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라.",
    "source": "로마서 8:28"
  },
  {
    "text": "아무 것도 염려하지 말고 다만 모든 일에 기도와 간구로, 너희 구할 것을 감사함으로 하나님께 아뢰라.",
    "source": "빌립보서 4:6"
  },
  {
    "text": "너희는 먼저 그의 나라와 그의 의를 구하라 그리하면 이 모든 것을 너희에게 더하시리라.",
    "source": "마태복음 6:33"
  },
  {
    "text": "나의 힘이신 여호와여 내가 주를 사랑하나이다.",
    "source": "시편 18:1"
  },
  {
    "text": "너는 마음을 다하여 여호와를 신뢰하고 네 명철을 의지하지 말라.",
    "source": "잠언 3:5"
  },
  {
    "text": "오직 여호와를 앙망하는 자는 새 힘을 얻으리니 독수리가 날개치며 올라감 같을 것이요.",
    "source": "이사야 40:31"
  },
  {
    "text": "평안을 너희에게 끼치노니 곧 나의 평안을 너희에게 주노라.",
    "source": "요한복음 14:27"
  },
  {
    "text": "너희가 내 안에 거하고 내 말이 너희 안에 거하면 무엇이든지 원하는 대로 구하라 그리하면 이루리라.",
    "source": "요한복음 15:7"
  },
  {
    "text": "진리를 알지니 진리가 너희를 자유롭게 하리라.",
    "source": "요한복음 8:32"
  },
  {
    "text": "사람이 떡으로만 살 것이 아니요 하나님의 입으로부터 나오는 모든 말씀으로 살 것이라.",
    "source": "마태복음 4:4"
  },
  {
    "text": "마음이 청결한 자는 복이 있나니 그들이 하나님을 볼 것임이요.",
    "source": "마태복음 5:8"
  },
  {
    "text": "서로 친절하게 하며 불쌍히 여기며 서로 용서하기를 하나님이 그리스도 안에서 너희를 용서하심과 같이 하라.",
    "source": "에베소서 4:32"
  },
  {
    "text": "너희 염려를 다 주께 맡기라 이는 그가 너희를 돌보심이라.",
    "source": "베드로전서 5:7"
  },
  {
    "text": "눈물을 흘리며 씨를 뿌리는 자는 기쁨으로 거두리로다.",
    "source": "시편 126:5"
  },
  {
    "text": "여호와를 경외하는 것이 지식의 근본이거늘 미련한 자는 지혜와 훈계를 멸시하느니라.",
    "source": "잠언 1:7"
  },
  {
    "text": "철이 철을 날카롭게 하는 것 같이 사람이 그의 친구의 얼굴을 빛나게 하느니라.",
    "source": "잠언 27:17"
  },
  {
    "text": "죽고 사는 것이 혀의 힘에 달렸나니 혀를 쓰기 좋아하는 자는 혀의 열매를 먹으리라.",
    "source": "잠언 18:21"
  },
  {
    "text": "너는 범사에 그를 인정하라 그리하면 네 길을 지도하시리라.",
    "source": "잠언 3:6"
  },
  {
    "text": "마음의 즐거움은 양약이라도 심령의 근심은 뼈를 마르게 하느니라.",
    "source": "잠언 17:22"
  },
  {
    "text": "그가 찔림은 우리의 허물 때문이요 그가 상함은 우리의 죄악 때문이라.",
    "source": "이사야 53:5"
  },
  {
    "text": "일어나라 빛을 발하라 이는 네 빛이 이르렀고 여호와의 영광이 네 위에 임하였음이니라.",
    "source": "이사야 60:1"
  },
  {
    "text": "새 계명을 너희에게 주노니 서로 사랑하라 내가 너희를 사랑한 것 같이 너희도 서로 사랑하라.",
    "source": "요한복음 13:34"
  },
  {
    "text": "너희는 마음에 근심하지 말라 하나님을 믿으니 또 나를 믿으라.",
    "source": "요한복음 14:1"
  },
  {
    "text": "믿음이 없이는 하나님을 기쁘시게 하지 못하나니.",
    "source": "히브리서 11:6"
  },
  {
    "text": "모든 성경은 하나님의 감동으로 된 것으로 교훈과 책망과 바르게 함과 의로 교육하기에 유익하니.",
    "source": "디모데후서 3:16"
  },
  {
    "text": "너희가 짐을 서로 지라 그리하여 그리스도의 법을 성취하라.",
    "source": "갈라디아서 6:2"
  },
  {
    "text": "오직 성령의 열매는 사랑과 희락과 화평과 오래 참음과 자비와 양선과 충성과 온유와 절제니.",
    "source": "갈라디아서 5:22-23"
  },
  {
    "text": "그런즉 너희가 먹든지 마시든지 무엇을 하든지 다 하나님의 영광을 위하여 하라.",
    "source": "고린도전서 10:31"
  },
  {
    "text": "그런즉 믿음, 소망, 사랑, 이 세 가지는 항상 있을 것인데 그 중의 제일은 사랑이라.",
    "source": "고린도전서 13:13"
  },
  {
    "text": "우리가 선을 행하되 낙심하지 말지니 포기하지 아니하면 때가 이르매 거두리라.",
    "source": "갈라디아서 6:9"
  },
  {
    "text": "여호와는 선하시니 그의 인자하심이 영원하고 그의 성실하심이 대대에 이르리로다.",
    "source": "시편 100:5"
  },
  {
    "text": "나의 평생에 선하심과 인자하심이 반드시 나를 따르리니 내가 여호와의 집에 영원히 살리로다.",
    "source": "시편 23:6"
  },
  {
    "text": "너희 중에 누구든지 지혜가 부족하거든 모든 사람에게 후히 주시고 꾸짖지 아니하시는 하나님께 구하라 그리하면 주시리라.",
    "source": "야고보서 1:5"
  },
  {
    "text": "볼지어다 내가 문 밖에 서서 두드리노니 누구든지 내 음성을 듣고 문을 열면 내가 그에게로 들어가 그와 더불어 먹고 그는 나와 더불어 먹으리라.",
    "source": "요한계시록 3:20"
  }
  ];

  static Future<Map<String, String>> getRandomVerse() async {
    // Simulate network delay if needed, or just return instantly
    await Future.delayed(const Duration(milliseconds: 500));
    final random = Random();
    final verse = _verses[random.nextInt(_verses.length)];

    String text = verse['text']!; // 원래 한글 데이터

    String source = verse['source']!; // 👈 출처 가져오기

    // 👇 이 부분이 핵심입니다! (한글이 아니면 번역해라!)
    String currentLang = AppLocale.current; 
    if (currentLang != 'ko') {
      // 1. 본문 번역
      text = await HolyTranslator.translate(
        text: text, 
        source: 'ko', 
        target: currentLang
      );

      // 2. 출처 번역 (추가된 부분!) ✨
      source = await HolyTranslator.translate(
        text: source, 
        source: 'ko', 
        target: currentLang
      );
    }

    return {'text': text, 'source': source};
  }
}
